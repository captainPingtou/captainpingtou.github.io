(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{168:function(t,s,e){t.exports=e.p+"assets/img/Snipaste_2020-03-17_16-53-45.bc8400af.png"},204:function(t,s,e){"use strict";e.r(s);var a=[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"离线安装docker-docker-compose"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#离线安装docker-docker-compose"}},[this._v("#")]),this._v(" 离线安装Docker&Docker-compose")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"一、下载docker："}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、下载docker："}},[this._v("#")]),this._v(" 一、下载Docker：")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"二、安装docker"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、安装docker"}},[this._v("#")]),this._v(" 二、安装Docker")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("解压")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[this._v("tar")]),this._v(" -xvf docker-18.06.1-ce.tgz  "),s("span",{pre:!0,attrs:{class:"token comment"}},[this._v("# docker-18.06.1-ce 换成下载的Docker文件名")]),this._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("将解压出来的docker文件内容移动到 /usr/bin/ 目录下")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[this._v("cp")]),this._v(" docker/* /usr/bin/\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("将docker注册为service")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[this._v("vim")]),this._v(" /etc/systemd/system/docker.service  "),s("span",{pre:!0,attrs:{class:"token comment"}},[this._v("# vi命令也可")]),this._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("将下列配置加到"),s("code",[this._v("docker.service")]),this._v("中并保存")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Unit"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("Description")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("Docker Application Container Engine\n\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("Documentation")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("https://docs.docker.com\n\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("After")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("network-online.target firewalld.service\n\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("Wants")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("network-online.target\n\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Service"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("Type")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("notify\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# the default is not to use systemd for cgroups because the delegate issues still")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# exists and systemd currently does not support the cgroup feature set required")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# for containers run by docker")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ExecStart")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/usr/bin/dockerd\n\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ExecReload")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/bin/kill -s HUP "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$MAINPID")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Having non-zero Limit*s causes performance problems due to accounting overhead")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# in the kernel. We recommend using cgroups to do container-local accounting.")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("LimitNOFILE")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("infinity\n\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("LimitNPROC")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("infinity\n\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("LimitCORE")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("infinity\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Uncomment TasksMax if your systemd version supports it.")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Only systemd 226 and above support this version.")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#TasksMax=infinity")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("TimeoutStartSec")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# set delegate yes so that systemd does not reset the cgroups of docker containers")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("Delegate")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("yes\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# kill only the docker process, not all processes in the cgroup")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("KillMode")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("process\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# restart the docker process if it exits prematurely")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("Restart")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("on-failure\n\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("StartLimitBurst")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("StartLimitInterval")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("60s\n\n \n\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Install"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("WantedBy")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("multi-user.target\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("启动")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" +x /etc/systemd/system/docker.service             "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#添加文件权限并启动docker")]),t._v("\n\nsystemctl daemon-reload                                 "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#重载unit配置文件")]),t._v("\n\nsystemctl start docker                                  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#启动Docker")]),t._v("\n\nsystemctl "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("enable")]),t._v(" docker.service                         "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#设置开机自启")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"三、验证"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三、验证"}},[this._v("#")]),this._v(" 三、验证")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[this._v("systemctl status docker                                 "),s("span",{pre:!0,attrs:{class:"token comment"}},[this._v("#查看Docker状态")]),this._v("\n\ndocker -v                                               "),s("span",{pre:!0,attrs:{class:"token comment"}},[this._v("#查看Docker版本")]),this._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"四、踩坑"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#四、踩坑"}},[this._v("#")]),this._v(" 四、踩坑")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("code",[this._v("docker -v")]),this._v("报错："),s("code",[this._v("Cannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the docker daemon running?")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("解决方案")]),this._v("：")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("systemctl daemon-reload\n\nsystemctl restart docker.service\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("出现load后的镜像名字和版本号为（none）的情况")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("解决方案：")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[this._v("docker tag IMAGEID REPOSITORY：TAG  "),s("span",{pre:!0,attrs:{class:"token comment"}},[this._v("# 镜像ID、仓库名、标签")]),this._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"五、下载docker-compose"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#五、下载docker-compose"}},[this._v("#")]),this._v(" 五、下载Docker-compose")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:e(168),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"六、安装docker-compose"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#六、安装docker-compose"}},[this._v("#")]),this._v(" 六、安装Docker-compose")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("将下载下来的"),s("code",[this._v("docker-compose-Linux-x86_64")]),this._v("文件上传到服务器上，然后执行如下命令将其移动到 "),s("code",[this._v("/usr/local/bin")]),this._v("，并改名为"),s("code",[this._v("docker-compose")]),this._v("。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[this._v("sudo")]),this._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[this._v("mv")]),this._v(" docker-compose-Linux-x86_64 /usr/local/bin/docker-compose\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[this._v("sudo")]),this._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[this._v("chmod")]),this._v(" +x /usr/local/bin/docker-compose\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"七、验证"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#七、验证"}},[this._v("#")]),this._v(" 七、验证")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("最后使用 "),s("code",[this._v("docker-compose -v")]),this._v("命令测试是否安装成功（如果提示“没有那个文件或目录”可以重启下服务器再试试）")])}],r=e(0),n=Object(r.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),e("ul",[e("li",[e("p",[e("a",{attrs:{href:"https://download.docker.com/linux/static/stable/x86_64/",target:"_blank",rel:"noopener noreferrer"}},[t._v("下载地址"),e("OutboundLink")],1)])]),t._v(" "),e("li",[e("p",[e("a",{attrs:{href:"https://docs.docker.com/install/linux/docker-ce/binaries/#install-static-binaries",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方安装文档"),e("OutboundLink")],1)])])]),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._m(5),t._v(" "),t._m(6),t._m(7),t._v(" "),t._m(8),t._m(9),t._v(" "),t._m(10),t._m(11),t._v(" "),t._m(12),t._m(13),t._v(" "),t._m(14),t._m(15),t._v(" "),t._m(16),t._v(" "),t._m(17),t._v(" "),t._m(18),e("hr"),t._v(" "),t._m(19),t._v(" "),t._m(20),t._v(" "),t._m(21),t._m(22),t._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/docker/compose/releases",target:"_blank",rel:"noopener noreferrer"}},[t._v("下载地址"),e("OutboundLink")],1)]),t._v(" "),t._m(23),t._v(" "),t._m(24),t._v(" "),t._m(25),t._v(" "),t._m(26),e("p",[t._v("接着执行如下命令添加可执行权限：")]),t._v(" "),t._m(27),t._m(28),t._v(" "),t._m(29)])}),a,!1,null,null,null);s.default=n.exports}}]);